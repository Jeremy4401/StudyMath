<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>SME Theater</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <style>
        /* =====================================
           [1] SNOWY GLASS THEME VARIABLES (IMPORTED)
        ===================================== */
        @font-face {
            font-family: "Comic Sans MS";
            src: local("Comic Sans MS");
        }

        :root {
            /* Snowy Day Palette */
            --color-sky-light: #e0f2f7;
            --color-sky-dark: #c0e0e8;
            --color-snow: #f8f8f8;
            --color-accent-blue: #66b2b2; /* Main highlight color */
            --color-text-dark: #33444c;
            --color-text-light: #5a7d8a;
            --color-glass-effect: rgba(255, 255, 255, 0.5);
            --color-glass-border: rgba(255, 255, 255, 0.8);
            --color-bg-primary: linear-gradient(180deg, var(--color-sky-light) 0%, var(--color-sky-dark) 100%);
            --color-sidebar-bg: rgba(255, 255, 255, 0.7);
            --color-button-hover: #7bd3d3;
            --card-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);

            /* Theater specific overrides for Light Mode */
            --bg: var(--color-bg-primary); 
            --text: var(--color-text-dark);
            --panel: rgba(255, 255, 255, 0.7); 
            --accent: var(--color-accent-blue);
        }
        
        /* DARK MODE (Internal option for the Theater page) */
        .dark {
            --bg: #1f1f1f;
            --text: #fff;
            --panel: #333;
            --accent: #4CAF50; 
        }

        /* Performance mode - inherited from your original code */
        .performance * {
            image-rendering: pixelated;
            filter: blur(0.2px);
            transition: none !important;
        }

        body {
            margin: 0;
            background: var(--bg);
            color: var(--text);
            font-family: "Comic Sans MS", cursive, sans-serif;
            overflow-x: hidden;
            transition: background .3s, color .3s;
            background-attachment: fixed;
            min-height: 100vh;
        }
        
        /* SNOW BACKGROUND LAYER */
        #snow-layer {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 100;
        }
        .snowflake {
            position: absolute;
            background: var(--color-snow);
            border-radius: 50%;
            pointer-events: none;
            animation: fall linear infinite;
            box-shadow: 0 0 4px rgba(255, 255, 255, 0.7);
            opacity: 0;
            filter: blur(0.5px);
        }
        @keyframes fall {
            0% { opacity: 0; transform: translateY(-10vh) scale(0.8); }
            5% { opacity: 0.9; }
            100% { opacity: 0; transform: translateY(110vh) scale(1.2); }
        }
        
        /* =====================================
           [2] SIDEBAR NAV (Main Launcher Style)
        ===================================== */
        #main-sidebar {
            position: fixed;
            top: 0;
            left: 0;
            width: 75px;
            height: 100%;
            background: var(--color-sidebar-bg);
            backdrop-filter: blur(10px);
            border-right: 1px solid var(--color-glass-border);
            padding-top: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            z-index: 1000;
            box-shadow: 2px 0 10px rgba(0, 0, 0, 0.05);
        }

        #main-sidebar div {
            padding: 15px;
            cursor: pointer;
            text-align: center;
            font-size: 24px;
            transition: 0.2s;
            color: var(--color-text-dark);
        }

        #main-sidebar div:hover, .sidebar-active {
            transform: scale(1.1);
            background: rgba(102, 178, 178, 0.2);
            border-radius: 8px;
            color: var(--color-accent-blue);
        }
        
        /* =====================================
           [3] THEATER SPECIFIC STYLES (Restyled)
        ===================================== */
        
        /* HEADER (Top Bar) */
        header {
            background: rgba(255, 255, 255, 0.7); 
            backdrop-filter: blur(10px);
            color: var(--color-text-dark);
            padding: 10px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 15px;
            border-bottom: 1px solid var(--color-glass-border);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            margin-left: 75px; /* Offset for main sidebar */
        }
        .dark header {
            background: #282828;
            color: white;
            border-bottom: 1px solid #444;
        }

        #site-title {
            color: var(--color-accent-blue);
            font-weight: bold;
            font-size: 1.5em;
        }

        #search-input {
            width: 100%;
            padding: 8px 10px;
            border-radius: 15px;
            border: 1px solid var(--color-glass-border);
            background-color: rgba(255, 255, 255, 0.7);
            color: var(--color-text-dark);
        }
        .dark #search-input {
             background-color: #444;
             color: #fff;
             border: none;
        }
        
        /* SETTINGS PANEL (Theater Internal) */
        #settings-panel {
            position: fixed;
            top: 0;
            left: 0;
            width: 260px;
            height: 100%;
            background: rgba(255, 255, 255, 0.9);
            color: var(--color-text-dark);
            padding: 20px;
            transform: translateX(-100%);
            transition: 0.35s ease;
            z-index: 9999;
            border-right: 1px solid var(--color-glass-border);
            box-shadow: 5px 0 15px rgba(0, 0, 0, 0.1);
        }
        #settings-panel.open { transform: translateX(0); }
        .dark #settings-panel {
            background: #222;
            color: white;
            border-right: 1px solid #444;
        }
        #settings-panel button {
            display: block;
            margin-bottom: 8px;
            padding: 10px 14px;
            border: none;
            background: var(--color-accent-blue);
            color: white;
            border-radius: 10px;
            cursor: pointer;
            transition: 0.2s;
        }
        #settings-panel button:hover {
            background: var(--color-button-hover);
        }
        .dark #settings-panel button {
            background: #555;
        }

        /* PAGE AREA */
        #content {
            flex: 1;
            padding: 20px;
            margin-left: 75px; /* Offset for main sidebar */
        }
        
        /* DOWNLOAD / PLAYLIST CARDS (Glass Card Style) */
        .download-box {
            background: var(--color-glass-effect);
            backdrop-filter: blur(8px);
            border: 1px solid var(--color-glass-border);
            padding: 20px;
            border-radius: 15px;
            color: var(--color-text-dark);
            min-width: 240px;
            box-shadow: var(--card-shadow);
            transition: transform 0.3s ease-out;
            margin-right: 12px; /* For scroller gap */
        }
        .download-box:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 30px rgba(102, 178, 178, 0.3);
        }
        .dark .download-box {
            background: #333;
            border: 1px solid #444;
            color: white;
        }

        .download-btn {
            display: inline-block;
            padding: 10px 16px;
            background: var(--color-accent-blue);
            color: white !important;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: bold;
            border: none;
            cursor: pointer;
            transition: 0.2s;
        }
        .download-btn:hover {
            background: var(--color-button-hover);
        }
        
        /* MOVIE BUTTONS (Glass Button Style) */
        .movie-btn {
            display: inline-block;
            padding: 10px 14px;
            background: rgba(255, 255, 255, 0.7);
            border: 1px solid var(--color-glass-border);
            color: var(--color-text-dark);
            border-radius: 15px;
            transition: background 0.2s, transform 0.2s;
            margin: 5px;
            white-space: nowrap;
        }
        .movie-btn:hover {
            background: rgba(255, 255, 255, 0.9);
            transform: translateY(-2px);
        }
        .dark .movie-btn {
            background: #444;
            color: white;
            border: none;
        }

        /* SCROLLER */
        .scroller-container { position: relative; margin-top: 15px; }
        .scroller {
            display: flex;
            overflow-x: auto;
            gap: 12px;
            scroll-behavior: smooth;
            padding: 10px 0;
        }
        /* Hide scrollbar for aesthetics */
        .scroller::-webkit-scrollbar { display: none; }
        .scroller { -ms-overflow-style: none; scrollbar-width: none; }
        
        .arrow {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            font-size: 32px;
            background: rgba(102, 178, 178, 0.7); /* Blue accent arrows */
            padding: 5px 10px;
            border-radius: 6px;
            color: white;
            cursor: pointer;
            user-select: none;
            transition: 0.2s;
            z-index: 50;
        }
        .arrow:hover { background: var(--color-accent-blue); }
        .left-arrow { left: -5px; }
        .right-arrow { right: -5px; }

        /* EMBED VIEWER */
        #embed-container {
            position: fixed;
            inset: 0;
            background: black;
            display: none;
            z-index: 9000;
        }
        #embed-frame {
            width: 100%;
            height: 100%;
            border: none;
        }

        /* HOME BUTTON (Main Launcher Style) */
        #home-btn {
            position: fixed;
            bottom: 20px;
            left: 95px; /* Offset from the main sidebar (75px + margin) */
            padding: 10px 16px;
            background: var(--color-glass-effect);
            backdrop-filter: blur(10px);
            border: 1px solid var(--color-glass-border);
            color: var(--color-accent-blue);
            border-radius: 15px;
            cursor: pointer;
            display: none;
            z-index: 9999;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            transition: all 0.2s;
            font-weight: bold;
        }
        #home-btn:hover { transform: scale(1.05); }
    </style>
</head>

<body>
    <div id="snow-layer"></div>

    <div id="main-sidebar">
        <div onclick="window.location.href='index.html'">üè†</div>
        <div onclick="window.location.href='index.html#games'">üéÆ</div>
        <div onclick="window.location.href='index.html#friends'">üë•</div>
        <div onclick="window.location.href='index.html#profile'">üë§</div>
        <div onclick="window.location.href='index.html#settingsPage'">‚öôÔ∏è</div>
        <div class="sidebar-active">üé¨</div> 
        <div onclick="window.location.href='requests.html'">üìÆ</div>
        <div onclick="window.location.href='proxies.html'">üåê</div>
        <div onclick="panic()">‚ö†</div>
    </div>

    <div id="transition-screen"></div>

    <div id="settings-panel">
        <h2>Settings</h2>
        <button onclick="toggleDarkMode()">Toggle Dark/Light Mode</button>
        <button onclick="togglePerformance()">Performance Mode</button>
        <hr>
        <button onclick="exportSettings()">Export Settings</button>
        <input type="file" onchange="importSettings(event)" style="display:block; margin-top: 10px; width: 100%;">
    </div>

    <header>
        <div id="site-title">SME Theater</div>
        <div id="search-bar"><input id="search-input" placeholder="Search..."></div>
        <button id="settings-button" onclick="openSettings()" class="download-btn">‚öôÔ∏è Settings</button>
    </header>

    <div id="content">

        <div id="hub-page" class="page active">
            <h1>üé¨ Theater Hub</h1>
            <p style="color:var(--color-text-light);">Select a category from the tabs below to begin watching media.</p>

            <div id="internal-sidebar" style="display:flex; gap:10px; margin-top:20px;">
                <button class="nav-btn download-btn active" data-page="hub-page">üè† Hub</button>
                <button class="nav-btn download-btn" data-page="youtube-page">‚ñ∂ YouTube</button>
                <button class="nav-btn download-btn" data-page="movies-page">üé¨ Movies</button>
                <button class="nav-btn download-btn" data-page="shows-page">üì∫ TV Shows</button>
            </div>
            
        </div>

        <div id="youtube-page" class="page">
            <h1>YouTube Playlists</h1>

            <div class="scroller-container">
                <div class="arrow left-arrow" onclick="scrollLeft('yt-scroll')">&#10094;</div>
                <div class="arrow right-arrow" onclick="scrollRight('yt-scroll')">&#10095;</div>

                <div id="yt-scroll" class="scroller">
                    <div class="download-box" onclick="openEmbedURL('https://www.youtube.com/embed/videoseries?list=PL76_gEdrKLsp21bfx-9TFsNv8Kl8B9YuC')">
                        <h2 style="color:var(--color-accent-blue);">Joe Bartolozzi Playlist</h2>
                        <p style="font-size:0.9em; margin: 5px 0 10px;">Funny Shorts Compilation</p>
                        <button class="download-btn">Play</button>
                    </div>
                    
                    <div class="download-box" onclick="openEmbedURL('https://www.youtube.com/embed/videoseries?list=PLx0sYbCqW5bC0Yh2Y8H94s9p-n4M3J6gA')">
                        <h2 style="color:var(--color-accent-blue);">Coding Tutorials</h2>
                        <p style="font-size:0.9em; margin: 5px 0 10px;">Learn to code in 10 minutes!</p>
                        <button class="download-btn">Play</button>
                    </div>
                </div>
            </div>
        </div>

        <div id="movies-page" class="page">
            <h1>Movies (Google Drive Links)</h1>

            <div class="scroller-container">
                <div class="arrow left-arrow" onclick="scrollLeft('movies-scroll')">&#10094;</div>
                <div class="arrow right-arrow" onclick="scrollRight('movies-scroll')">&#10095;</div>

                <div id="movies-scroll" class="scroller" style="flex-wrap: wrap; height: auto;">
                    <button class="movie-btn" onclick="openEmbedURL('https://drive.google.com/file/d/1AIq4OqiMWiY9zZSayF5VID7pfTwSH6BM/preview')">A Bug's Life</button>
                    <button class="movie-btn" onclick="openEmbedURL('https://drive.google.com/file/d/1e2UIrJdsz_0k5tp2v0EnPZiPv2ZQSTzg/preview')">A Charlie Brown Christmas</button>
                    <button class="movie-btn" onclick="openEmbedURL('https://drive.google.com/file/d/0B-uFeCO4yCFISTFmNlE3akNDbU0/preview')">A Dog's Purpose</button>
                    <button class="movie-btn" onclick="openEmbedURL('https://drive.google.com/file/d/1ify_EMaQW-ZAn2F0STztn2AGU-jE7aHL/preview')">A Goofy Movie</button>
                    <button class="movie-btn" onclick="openEmbedURL('https://drive.google.com/file/d/1uCRRJZj1GAaweX996uHbF2zxPoessmGW/preview')">Alvin and the Chipmunks</button>
                    <button class="movie-btn" onclick="openEmbedURL('https://drive.google.com/file/d/1LTKy48IbusfXsl5nSNDTd0M3A8B3aPke/preview')">Alvin and the Chipmunks: Chipwrecked</button>
                    <button class="movie-btn" onclick="openEmbedURL('https://drive.google.com/file/d/1GYQqHUdyWMNQJKj4Sa8SGW0ZRX32D5og/preview')">Annie</button>
                    <button class="movie-btn" onclick="openEmbedURL('https://drive.google.com/file/d/1e4NzmeC84qest_9Wzmtvmi80brGPYnsN/preview')">An Extremely Goofy Movie</button>
                    <button class="movie-btn" onclick="openEmbedURL('https://drive.google.com/file/d/1AW3Zm8256tzZ-37lmgYmIGse4knu8IdA/preview')">Ant-Man and the Wasp</button>
                    <button class="movie-btn" onclick="openEmbedURL('https://drive.google.com/file/d/1_qJqk2Ss1f45puz3xGQcdD1NxM3ipupj/preview')">Ant-Man</button>
                    <button class="movie-btn" onclick="openEmbedURL('https://drive.google.com/file/d/16tKuEYtxi7EeKtX3yZZR-nXgZ_oGTxXS/preview')">Avatar</button>
                    <button class="movie-btn" onclick="openEmbedURL('https://drive.google.com/file/d/1ehi9tidOYHb1RMldxtBw6-L3UhyEKVm9/preview')">Avengers: Endgame</button>
                    <button class="movie-btn" onclick="openEmbedURL('https://drive.google.com/file/d/1VWLpj4G4CEgHnjpxfc67MrlEWu5pD75Y/preview')">Avengers: Infinity War</button>
                    <button class="movie-btn" onclick="openEmbedURL('https://drive.google.com/file/d/1ZwP0FLdFdAoeskqGvQYX5CwqEeSFWS1G/preview')">Back to the Future</button>
                    <button class="movie-btn" onclick="openEmbedURL('https://drive.google.com/file/d/1vmA2LTkSzbtUJve8TTy2UVkPAfHMtGwK/preview')">Back to the Future II</button>
                    <button class="movie-btn" onclick="openEmbedURL('https://drive.google.com/file/d/16A4hzHFTcNduq6F-u4zQw7iTha5aEKD-/preview')">Back to the Future III</button>
                    <button class="movie-btn" onclick="openEmbedURL('https://drive.google.com/file/d/1_uoLtwAXgjzKVC3sFLkgEKROhzr6GSrD/preview')">The Bad Guys</button>
                    <button class="movie-btn" onclick="openEmbedURL('https://drive.google.com/file/d/1K88LvZ6q9KRwsdiVQ72Wrh5DQqWVLkd3/preview')">Barbie</button>
                    <button class="movie-btn" onclick="openEmbedURL('https://drive.google.com/file/d/1CZvw1MgSLVQR9Z9L8qpl8j1oI7DnMDWr/preview')">The Dark Knight</button>
                </div>
            </div>
        </div>

        <div id="shows-page" class="page">
            <h1>üì∫ TV Shows & Series</h1>
            <p class="download-box">This section is currently being updated! We are adding new series links soon.</p>
        </div>

    </div>

    <div id="embed-container">
        <iframe id="embed-frame"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
            allowfullscreen>
        </iframe>
    </div>

    <div id="home-btn" onclick="closeEmbed()">üè† Exit Viewer</div>

    <script>
        /******** GLOBAL UTILITIES ********/
        function panic() { location.href = "https://classroom.google.com"; }
        
        /******** PAGE NAV (Internal Theater Nav) ********/
        const navButtons = document.querySelectorAll(".nav-btn");
        navButtons.forEach(btn => {
            btn.addEventListener("click", () => {
                const target = btn.getAttribute("data-page");
                document.querySelectorAll(".page").forEach(p => p.classList.remove("active"));
                document.getElementById(target).classList.add("active");

                navButtons.forEach(b => b.classList.remove("active"));
                btn.classList.add("active");
            });
        });

        /******** SNOWFLAKES ********/
        const snowLayer = document.getElementById('snow-layer');
        function createSnowflake() {
            const s = document.createElement("div");
            s.classList.add("snowflake");
            s.style.width = s.style.height = Math.random() * 4 + 1 + "px";
            s.style.top = Math.random() * -10 + "vh";
            s.style.left = Math.random() * 100 + "vw";
            s.style.animationDuration = Math.random() * 12 + 8 + "s";
            s.style.animationDelay = Math.random() * 6 + "s";
            s.style.zIndex = Math.floor(Math.random() * 5);

            snowLayer.appendChild(s);
            setTimeout(() => s.remove(), 20000);
        }
        setInterval(createSnowflake, 150);
        
        /******** SETTINGS ********/
        function openSettings() {
            document.getElementById("settings-panel").classList.add("open");
        }
        document.addEventListener("click", function(e) {
            const panel = document.getElementById("settings-panel");
            const btn = document.getElementById("settings-button");
            if (panel.classList.contains("open") && !panel.contains(e.target) && e.target !== btn) {
                panel.classList.remove("open");
            }
        });

        /******** DARK MODE ********/
        function toggleDarkMode() {
            document.body.classList.toggle("dark");
        }

        /******** PERFORMANCE MODE ********/
        function togglePerformance() {
            document.body.classList.toggle("performance");
        }

        /******** EXPORT / IMPORT ********/
        function exportSettings() {
            const data = {
                dark: document.body.classList.contains("dark"),
                performance: document.body.classList.contains("performance")
            };
            const blob = new Blob([JSON.stringify(data)], { type: "application/json" });
            const a = document.createElement("a");
            a.href = URL.createObjectURL(blob);
            a.download = "theater_settings.json";
            a.click();
        }
        function importSettings(event) {
            const file = event.target.files[0];
            if (!file) return;
            const r = new FileReader();
            r.onload = e => {
                const s = JSON.parse(e.target.result);
                document.body.classList.toggle("dark", s.dark);
                document.body.classList.toggle("performance", s.performance);
            };
            r.readAsText(file);
        }

        /******** SEARCH ********/
        document.getElementById("search-input").addEventListener("input", function() {
            let q = this.value.toLowerCase();
            document.querySelectorAll(".download-box").forEach(box => {
                // Check if the title or text content contains the query
                box.style.display = box.textContent.toLowerCase().includes(q) ? "block" : "none";
            });
            document.querySelectorAll(".movie-btn").forEach(btn => {
                btn.style.display = btn.textContent.toLowerCase().includes(q) ? "inline-block" : "none";
            });
        });

        /******** SCROLLER ********/
        function scrollLeft(id) { document.getElementById(id).scrollLeft -= 220; }
        function scrollRight(id) { document.getElementById(id).scrollLeft += 220; }

        /******** TRANSITION ********/
        function transition(callback) {
            let t = document.getElementById("transition-screen");
            t.classList.add("active");
            setTimeout(() => {
                callback();
                setTimeout(() => t.classList.remove("active"), 300);
            }, 300);
        }

        /******** EMBED ********/
        function openEmbedURL(url) {
            transition(() => {
                document.getElementById("embed-frame").src = url;
                document.getElementById("embed-container").style.display = "block";
                document.getElementById("home-btn").style.display = "flex"; 
            });
        }
        function closeEmbed() {
            transition(() => {
                document.getElementById("embed-container").style.display = "none";
                document.getElementById("embed-frame").src = "";
                document.getElementById("home-btn").style.display = "none";
            });
        }
    </script>
</body>
</html>
